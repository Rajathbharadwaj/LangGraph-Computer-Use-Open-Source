# System Architecture

## ğŸ—ï¸ Production Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERNET                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Load Balancer  â”‚
                    â”‚     (Nginx)     â”‚
                    â”‚  SSL/TLS + CDN  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend     â”‚  â”‚  Backend API    â”‚  â”‚  LangGraph  â”‚
â”‚   (Next.js)    â”‚  â”‚   (FastAPI)     â”‚  â”‚   Server    â”‚
â”‚                â”‚  â”‚                 â”‚  â”‚             â”‚
â”‚ â€¢ Dashboard    â”‚  â”‚ â€¢ REST API      â”‚  â”‚ â€¢ AI Agent  â”‚
â”‚ â€¢ Clerk Auth   â”‚  â”‚ â€¢ WebSocket     â”‚  â”‚ â€¢ Workflows â”‚
â”‚ â€¢ User UI      â”‚  â”‚ â€¢ Cookie Mgmt   â”‚  â”‚ â€¢ Planning  â”‚
â”‚                â”‚  â”‚ â€¢ Rate Limit    â”‚  â”‚             â”‚
â”‚ Port: 3000     â”‚  â”‚ Ports: 8000-1   â”‚  â”‚ Port: 8124  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Redis   â”‚                        â”‚   PostgreSQL   â”‚
    â”‚ (Cache)  â”‚                        â”‚   (Database)   â”‚
    â”‚          â”‚                        â”‚                â”‚
    â”‚ â€¢ Sessions                        â”‚ â€¢ Users        â”‚
    â”‚ â€¢ Rate Limits                     â”‚ â€¢ X Accounts   â”‚
    â”‚ â€¢ Temp Data                       â”‚ â€¢ Cookies      â”‚
    â”‚                                   â”‚ â€¢ Posts        â”‚
    â”‚ Port: 6379                        â”‚ â€¢ API Usage    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚                â”‚
                                        â”‚ Port: 5432     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Docker Container Manager                      â”‚
    â”‚                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  Browser     â”‚  â”‚  Browser     â”‚  â”‚ Browser â”‚â”‚
    â”‚  â”‚  (User 1)    â”‚  â”‚  (User 2)    â”‚  â”‚ (User N)â”‚â”‚
    â”‚  â”‚              â”‚  â”‚              â”‚  â”‚         â”‚â”‚
    â”‚  â”‚ â€¢ Stealth    â”‚  â”‚ â€¢ Stealth    â”‚  â”‚ â€¢ ...   â”‚â”‚
    â”‚  â”‚ â€¢ Playwright â”‚  â”‚ â€¢ Playwright â”‚  â”‚         â”‚â”‚
    â”‚  â”‚ â€¢ X Session  â”‚  â”‚ â€¢ X Session  â”‚  â”‚         â”‚â”‚
    â”‚  â”‚              â”‚  â”‚              â”‚  â”‚         â”‚â”‚
    â”‚  â”‚ Port: 32768  â”‚  â”‚ Port: 32769  â”‚  â”‚ Random  â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow

### 1. User Authentication Flow

```
User Browser
    â”‚
    â”œâ”€> Opens Dashboard (localhost:3000)
    â”‚
    â”œâ”€> Clerk Login Widget
    â”‚   â”œâ”€> User enters email/password
    â”‚   â””â”€> Clerk validates credentials
    â”‚
    â”œâ”€> Clerk returns JWT token
    â”‚
    â”œâ”€> Frontend stores session
    â”‚
    â””â”€> Redirects to Dashboard
```

### 2. X Account Connection Flow

```
User
    â”‚
    â”œâ”€> Clicks "Connect X Account"
    â”‚
    â”œâ”€> Extension captures cookies
    â”‚   â”œâ”€> Detects X login
    â”‚   â”œâ”€> Extracts cookies
    â”‚   â””â”€> Sends to Backend (8001)
    â”‚
    â”œâ”€> Backend receives cookies
    â”‚   â”œâ”€> Encrypts with Fernet
    â”‚   â”œâ”€> Stores in PostgreSQL
    â”‚   â””â”€> Links to user_id
    â”‚
    â”œâ”€> Backend injects to Docker
    â”‚   â”œâ”€> Gets/Creates user container
    â”‚   â”œâ”€> Decrypts cookies
    â”‚   â”œâ”€> Injects into browser
    â”‚   â””â”€> Verifies login
    â”‚
    â””â”€> Dashboard shows "Connected âœ…"
```

### 3. Post Import Flow

```
User
    â”‚
    â”œâ”€> Clicks "Import Posts"
    â”‚
    â”œâ”€> Frontend â†’ Backend API (8000)
    â”‚   â””â”€> POST /api/import-posts
    â”‚
    â”œâ”€> Backend checks rate limit
    â”‚   â”œâ”€> Query Redis
    â”‚   â”œâ”€> Check hourly/daily limits
    â”‚   â””â”€> Allow or deny
    â”‚
    â”œâ”€> Backend scrapes X posts
    â”‚   â”œâ”€> Get user container
    â”‚   â”œâ”€> Use Playwright tools
    â”‚   â”œâ”€> Navigate to profile
    â”‚   â”œâ”€> Scrape posts
    â”‚   â””â”€> Extract content
    â”‚
    â”œâ”€> Backend stores posts
    â”‚   â”œâ”€> Insert into PostgreSQL
    â”‚   â””â”€> Link to x_account_id
    â”‚
    â””â”€> Frontend displays posts
```

### 4. AI Agent Execution Flow

```
User
    â”‚
    â”œâ”€> Clicks "Start Agent"
    â”‚
    â”œâ”€> Frontend â†’ LangGraph (8124)
    â”‚   â””â”€> POST /runs/stream
    â”‚
    â”œâ”€> LangGraph creates agent
    â”‚   â”œâ”€> Load user context
    â”‚   â”œâ”€> Get writing style
    â”‚   â””â”€> Initialize tools
    â”‚
    â”œâ”€> Agent executes tasks
    â”‚   â”œâ”€> Plan actions
    â”‚   â”œâ”€> Use browser tools
    â”‚   â”œâ”€> Like/Follow/Comment
    â”‚   â””â”€> Track progress
    â”‚
    â”œâ”€> Stream updates to Frontend
    â”‚   â”œâ”€> WebSocket connection
    â”‚   â”œâ”€> Real-time status
    â”‚   â””â”€> Action logs
    â”‚
    â””â”€> Store results in DB
        â”œâ”€> Update API usage
        â””â”€> Log actions
```

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: Network Security                      â”‚
â”‚ â€¢ SSL/TLS encryption                            â”‚
â”‚ â€¢ Firewall rules                                â”‚
â”‚ â€¢ DDoS protection                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: Authentication                         â”‚
â”‚ â€¢ Clerk JWT tokens                              â”‚
â”‚ â€¢ Session management                            â”‚
â”‚ â€¢ Multi-factor auth (optional)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: Authorization                          â”‚
â”‚ â€¢ User-specific data access                     â”‚
â”‚ â€¢ Rate limiting per user                        â”‚
â”‚ â€¢ Resource quotas                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: Data Encryption                        â”‚
â”‚ â€¢ Fernet encryption for cookies                 â”‚
â”‚ â€¢ PostgreSQL encryption at rest                 â”‚
â”‚ â€¢ Secure key management                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: Container Isolation                    â”‚
â”‚ â€¢ Per-user Docker containers                    â”‚
â”‚ â€¢ Network isolation                             â”‚
â”‚ â€¢ Resource limits                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    users                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              VARCHAR                    â”‚
â”‚ email                VARCHAR (UNIQUE)           â”‚
â”‚ plan                 VARCHAR (free/pro/ent)     â”‚
â”‚ is_active            BOOLEAN                    â”‚
â”‚ created_at           TIMESTAMP                  â”‚
â”‚ updated_at           TIMESTAMP                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 1:N
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 x_accounts                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              SERIAL                     â”‚
â”‚ user_id (FK)         VARCHAR â†’ users.id         â”‚
â”‚ username             VARCHAR                    â”‚
â”‚ display_name         VARCHAR                    â”‚
â”‚ is_connected         BOOLEAN                    â”‚
â”‚ last_synced_at       TIMESTAMP                  â”‚
â”‚ created_at           TIMESTAMP                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ 1:N             â”‚ 1:N
             â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    user_cookies       â”‚  â”‚    user_posts       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      SERIAL   â”‚  â”‚ id (PK)    SERIAL   â”‚
â”‚ x_account_id FK       â”‚  â”‚ x_account_id FK     â”‚
â”‚ encrypted_cookies TEXTâ”‚  â”‚ content      TEXT   â”‚
â”‚ captured_at TIMESTAMP â”‚  â”‚ post_url     VARCHARâ”‚
â”‚ expires_at  TIMESTAMP â”‚  â”‚ likes        INT    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ retweets     INT    â”‚
                           â”‚ replies      INT    â”‚
                           â”‚ posted_at TIMESTAMP â”‚
                           â”‚ imported_at TIMESTAMPâ”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 api_usage                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)              SERIAL                     â”‚
â”‚ user_id (FK)         VARCHAR â†’ users.id         â”‚
â”‚ endpoint             VARCHAR                    â”‚
â”‚ request_count        INTEGER                    â”‚
â”‚ date                 TIMESTAMP                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ³ Docker Container Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Docker Host                        â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     xgrowth_network (Bridge)              â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Frontend Container                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Next.js                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Port 3000                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Backend Container                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ FastAPI                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Ports 8000, 8001                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Access to Docker socket          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  LangGraph Container                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ LangGraph server                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Port 8124                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  PostgreSQL Container               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Port 5432                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Volume: postgres_data            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Redis Container                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Port 6379                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Volume: redis_data               â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Per-User Browser Containers        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ browser-user_123 (Port 32768)    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ browser-user_456 (Port 32769)    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ browser-user_789 (Port 32770)    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ ...                              â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Scaling Strategy

### Vertical Scaling (Single Server)
```
Current Setup â†’ Bigger Server
â€¢ 4GB RAM    â†’  16GB RAM
â€¢ 2 CPU      â†’  8 CPU
â€¢ 50GB Disk  â†’  200GB Disk

Cost: $50/mo â†’ $200/mo
Users: 100   â†’ 500
```

### Horizontal Scaling (Multiple Servers)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load Balancerâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
   â”‚       â”‚       â”‚       â”‚
â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”
â”‚ App â”‚ â”‚ App â”‚ â”‚ App â”‚ â”‚ App â”‚
â”‚  1  â”‚ â”‚  2  â”‚ â”‚  3  â”‚ â”‚  4  â”‚
â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜
   â”‚       â”‚       â”‚       â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚       â”‚       â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”
   â”‚  DB   â”‚ â”‚ Redis â”‚
   â”‚Clusterâ”‚ â”‚Clusterâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜

Cost: $1000+/mo
Users: 10,000+
```

## ğŸ“ˆ Performance Metrics

### Response Times (Target)
```
Endpoint                Response Time
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GET  /api/health       < 10ms
GET  /api/user         < 50ms
POST /api/login        < 200ms
POST /api/import-posts < 5s
POST /api/run-agent    < 30s
```

### Throughput (Target)
```
Service         Requests/sec
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Frontend        1000 req/s
Backend API     500 req/s
Database        1000 queries/s
Redis           10,000 ops/s
```

### Resource Usage (Per User)
```
Resource        Usage
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Memory          50MB
CPU             0.1 core
Storage         10MB
Network         1Mbps
```

---

## ğŸ¯ Summary

This architecture provides:
- âœ… **Security** - Multi-layer protection
- âœ… **Scalability** - Horizontal and vertical
- âœ… **Reliability** - Database persistence
- âœ… **Performance** - Redis caching
- âœ… **Isolation** - Per-user containers
- âœ… **Monitoring** - Error tracking
- âœ… **Maintainability** - Clean separation

Ready for production deployment! ğŸš€

